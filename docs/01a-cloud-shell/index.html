
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>Using Python with Cloud Shell</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://storage.googleapis.com/codelab-elements/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <google-codelab-analytics gaid="UA-49880327-14"></google-codelab-analytics>
  <google-codelab codelab-gaid=""
                  id="01a-cloud-shell"
                  title="Using Python with Cloud Shell"
                  environment="web"
                  feedback-link="">
    
      <google-codelab-step label="Overview" duration="0">
        <p>In this codelab, you&#39;ll setup  <a href="https://cloud.google.com/shell" target="_blank">Google Cloud Shell</a> for developing Python applications. Cloud Shell provides a  <a href="https://cloud.google.com/shell/docs/how-cloud-shell-works" target="_blank">Debian Linux command-line environment</a> as well as an online code editor.</p>
<h2 is-upgraded>What you&#39;ll need</h2>
<ul>
<li>Google account</li>
<li>Web browser (Google Chrome recommended)</li>
</ul>
<h2 class="checklist" is-upgraded>What you&#39;ll learn</h2>
<ul>
<li>Run Cloud Shell</li>
<li>Create a Python virtual environment</li>
<li>Edit files with Cloud Shell Editor</li>
<li>Install Python packages to a virtual environment</li>
</ul>


      </google-codelab-step>
    
      <google-codelab-step label="Open Cloud Shell" duration="0">
        <ol type="1">
<li>Navigate to the Google Cloud Console:  <a href="https://console.cloud.google.com/" target="_blank">https://console.cloud.google.com/</a></li>
</ol>
<p>Accept any terms of service that appear.</p>
<ol type="1">
<li>Click the Cloud Shell button  <img alt="57863b7d6eb4521.png" style="width: 41.00px" src="img/57863b7d6eb4521.png"> at the top of the screen. <img alt="e08d2f6c861f00ec.png" style="width: 624.00px" src="img/e08d2f6c861f00ec.png"></li>
<li>Click the Continue button if it appears to activate Cloud Shell. <img alt="86df2418057af2f4.png" style="width: 624.00px" src="img/86df2418057af2f4.png"></li>
</ol>


      </google-codelab-step>
    
      <google-codelab-step label="Create a Python 3 virtual environment" duration="0">
        <p>To isolate our Python environment from the system Python, create a virtual environment.</p>
<ol type="1">
<li>Create a directory to hold virtual environment files. Paste this command into the Cloud Shell and press Enter to execute it.  <pre><code>mkdir ~/venvs
</code></pre>
</li>
<li>Create a virtual environment called &#34;dev&#34;.  <pre><code>python3 -m venv venvs/dev
</code></pre>
</li>
<li>Edit the .bashrc file so that our virtual environment is used by default when you open Cloud Shell.  <pre><code>echo &#39;
source &#34;$HOME/venvs/dev/bin/activate&#34;
&#39; &gt;&gt; &#34;$HOME/.bashrc&#34;
</code></pre>
</li>
</ol>
<p>The &#34;echo&#34; command prints text, and the &#34;&gt;&gt;&#34; command appends that text to the file.</p>
<ol type="1">
<li>Activate your virtual environment by loading the configuration you just created. <br><code>source .bashrc<br></code></li>
</ol>
<p>Now when you open Cloud Shell, you should see &#34;(dev)&#34;, which indicates you are using the virtual environment you just created.</p>
<ol type="1">
<li>Verify the Python binary is the one from the virtual environment by using the &#34;which&#34; command. <br><code>which python<br></code></li>
</ol>
<p>If you have successfully activated the virtual environment, you should see an output like &#34;/home/USERNAME/venvs/dev/bin/python&#34;.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Open Cloud Shell Editor" duration="0">
        <p>In addition to a command-line interface, Cloud Shell provides a graphical code editor.</p>
<ol type="1">
<li>Click the square button  <img alt="3acf8536387fbe43.png" style="width: 51.00px" src="img/3acf8536387fbe43.png"> to open Cloud Shell in a new window.  <img alt="a309af8d7b168272.png" style="width: 624.00px" src="img/a309af8d7b168272.png"></li>
<li>In the new window click the pencil button  <img alt="7f0acdee10f9b573.png" style="width: 44.00px" src="img/7f0acdee10f9b573.png"> to open the code editor. <img alt="9a57e73ac59e4cf1.png" style="width: 624.00px" src="img/9a57e73ac59e4cf1.png"></li>
</ol>


      </google-codelab-step>
    
      <google-codelab-step label="Open a working directory" duration="0">
        <p>In order to edit files, Cloud Shell Editor needs a working directory. Opening a working directory allows you to browse any files contained within it and provides a starting directory for any command-line terminals started by the editor.</p>
<ol type="1">
<li>Click the files button  <img alt="cc6cd6d7604bd26a.png" style="width: 38.00px" src="img/cc6cd6d7604bd26a.png"> to open the files pane. <img alt="d61bd383c0051faf.png" style="width: 624.00px" src="img/d61bd383c0051faf.png"></li>
<li>Click the &#34;Open Folder&#34; button to select a folder. <img alt="e48f15462b728f23.png" style="width: 576.00px" src="img/e48f15462b728f23.png"></li>
<li>Usually, a you would select a sub-directory corresponding to the project you&#39;re working on. Today, select the folder corresponding to your username. This is your &#34;home&#34; directory. Any files created here or in sub-directories are persisted across Cloud Shell sessions. <img alt="3583a14485354329.png" style="width: 536.00px" src="img/3583a14485354329.png"></li>
<li>Click the &#34;Open&#34; button once you have selected the directory. You should now see a listing of files in the editor. <img alt="17d052b8b06e534d.png" style="width: 624.00px" src="img/17d052b8b06e534d.png"></li>
</ol>


      </google-codelab-step>
    
      <google-codelab-step label="Create a requirements.txt file" duration="0">
        <p>Use Cloud Shell Editor to create a text file containing a list of Python packages you&#39;ll use in this course.</p>
<ol type="1">
<li>Select File -&gt; New File from the menu. <img alt="cf208297fa71b9aa.png" style="width: 527.00px" src="img/cf208297fa71b9aa.png"></li>
<li>Enter &#34;requirements.txt&#34; as the file name. <img alt="31638baf45092443.png" style="width: 624.00px" src="img/31638baf45092443.png"></li>
<li>Click the OK button to create the file.</li>
<li>Select the file to open it. <img alt="2ca44612f58a4ac1.png" style="width: 624.00px" src="img/2ca44612f58a4ac1.png"></li>
<li>Paste in the list Python packages you&#39;ll be using in this course.  <pre><code>appdirs==1.4.4
astroid==2.5.6
attrs==20.3.0
black==21.4b2
cfgv==3.2.0
click==7.1.2
coverage==5.5
distlib==0.3.1
filelock==3.0.12
flake8==3.9.1
Flask==1.1.2
identify==2.2.4
importlib-metadata==4.0.1
iniconfig==1.1.1
isort==5.8.0
itsdangerous==1.1.0
Jinja2==2.11.3
lazy-object-proxy==1.6.0
MarkupSafe==1.1.1
mccabe==0.6.1
mypy-extensions==0.4.3
nodeenv==1.6.0
packaging==20.9
pathspec==0.8.1
pluggy==0.13.1
pre-commit==2.12.1
py==1.10.0
pycodestyle==2.7.0
pyfakefs==4.4.0
pyflakes==2.3.1
pylint==2.8.2
pyparsing==2.4.7
pytest==6.2.3
pytest-cov==2.11.1
PyYAML==5.4.1
regex==2021.4.4
six==1.16.0
toml==0.10.2
typed-ast==1.4.3
typing-extensions==3.10.0.0
virtualenv==20.4.5
Werkzeug==1.0.1
zipp==3.4.1
</code></pre>
</li>
<li>Save the file. <img alt="23914679199a1237.png" style="width: 624.00px" src="img/23914679199a1237.png"></li>
</ol>


      </google-codelab-step>
    
      <google-codelab-step label="Open Cloud Shell Editor Terminal" duration="0">
        <p>In addition to the Cloud Shell command-line, the Cloud Shell Editor comes with a command-line terminal. Using this terminal ensures that you are in the correct directory. It also enables useful features such as links to source code files from test output, which we will see in a later codelab.</p>
<ol type="1">
<li>Open a command-line terminal from Cloud Shell Editor by clicking the Terminal -&gt; New Terminal menu button. <img alt="3059183521aa1184.png" style="width: 624.00px" src="img/3059183521aa1184.png"></li>
</ol>
<p>You should see a terminal pane at the bottom of your window. <img alt="66b1f8ddf3e4bc48.png" style="width: 624.00px" src="img/66b1f8ddf3e4bc48.png"></p>
<ol type="1">
<li>Verify the Python binary is the one from the virtual environment by using the &#34;which&#34; command. <br><code>which python<br></code></li>
</ol>
<p>If you have successfully activated the virtual environment, you should see an output like &#34;/home/USERNAME/venvs/dev/bin/python&#34;.</p>
<ol type="1">
<li>Run the &#34;ls&#34; command to list the files in the current directory. <br><code>ls<br></code></li>
</ol>
<p>Verify that the &#34;requirements.txt&#34; file appears in the list.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Install Python packages" duration="0">
        <p>Finally, add the Python packages that you&#39;ll use in this course to the virtual environment.</p>
<ol type="1">
<li>Install the packages from the &#34;requirements.txt&#34; file into your virtual environment by running the &#34;pip&#34; command.  <pre><code>pip install -r requirements.txt
</code></pre>
</li>
<li>From the command-line verify that the packages were installed successfully. Use the &#34;-c&#34; option for Python to run a short one-line program to verify that Flask was installed.  <pre><code>python -c &#39;import flask; print(flask.__version__)&#39;
</code></pre>
</li>
</ol>
<p>You should see &#34;1.1.2&#34; printed to the command-line output.</p>


      </google-codelab-step>
    
  </google-codelab>

  <script src="https://storage.googleapis.com/codelab-elements/native-shim.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/custom-elements.min.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/prettify.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/codelab-elements.js"></script>
  <script src="//support.google.com/inapp/api.js"></script>

</body>
</html>
